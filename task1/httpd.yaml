---
- hosts: all
  remote_user: vagrant
  become: yes
  become_method: sudo
  gather_facts: True
  tasks: 
    - name: Install pakages
      yum:
        name: "{{ item }}"
        state: present
      loop: 
        - httpd

    - name: Create index.html
      file: 
        path: "{{ INDEX_HTML_PATH }}"
        state: touch
        owner: apache
        group: apache
    - name: Copy content to index.html
      copy:
        content: "{{ INDEX_HTML_CONTENT }}"
        dest:  /var/www/html/index.html
    - name: start service apache
      service: 
        name: "{{ HTTPD_SERVICE }}"
        state: started
        enabled: yes
         
    - name: open 80\443 ports
      firewalld:
        zone: public
        service:
          name:
            - https
            - http
        permanent: yes
        state: enabled
      notify: reload firewalld  